@model IEnumerable<Product>
@{
    string? authorId = ViewData["authorIdForNewReview"] as string;
}

@foreach (var p in Model)
{
    <tr>
        <td>
            <a asp-controller="Product" asp-action="Index" asp-route-id="@p.Id">
                @await Html.PartialAsync("ProductCardPartialMini", p)
            </a>
        </td>
        @if (authorId != null)
        {
            <td>
                <a asp-controller="Review" asp-action="AddReview" asp-route-prodId="@p.Id" asp-route-authorId="@authorId">Write a review</a>
            </td>
        }
    </tr>
}
